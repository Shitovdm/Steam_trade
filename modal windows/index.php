<html>
<head>
    <title>
    </title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <!--<script src="js/windows.js"></script>-->
</head>
<body>
	<div class="container" style="top:30px;left:10px;width:300px;height:inherit;" id="first_window" onClick="activeWindow(this.id)">
        <div id="window-panel-first" class="top-panel">
         	<span id="move-first" class="move-icon" onClick="moveWindow(this.id);"><img src="images/icons/move.png" width="24px" height="24px;"></span>
            <span class="window-name">The turnip</span>
            <span id="close-first" class="panel-icon" onClick="closeWindow(this.id)" alt="Close"><img src="images/icons/close.png" width="24px" height="24px;"></span>
            <span id="maximize-first" class="panel-icon" onClick="maximizeWindow(this.id)" alt="Maximize"><img src="images/icons/maximize.png" width="24px" height="24px;"></span>
            <span id="minimize-first" class="panel-icon" onClick="minimizeContent(this.id)" alt="Minimize"><img src="images/icons/minimize.png" width="24px" height="24px;"></span>
        </div>
        
    	<div id="content-block-first" class="content">
        	<span class="n-resize" id="n-resize-first" onClick="Resize(this.id,'n')"></span>
        	<span class="w-resize" id="w-resize-first" onClick="Resize(this.id,'w')"></span>
    		<span class="nw-resize" id="d-resize-first"  onClick="Resize(this.id,'nw')"><img src="images/icons/resize.png" width="18px" height="18px"></span>
            <span class="interlayer"><br></span>
        	<h1>The turnip</h1>
        	<p>Grandpa planted a turnip. The turnip grew bigger and bigger. Grandpa came to pick the turnip, pulled and pulled but couldn't pull it up! Grandpa called Grandma. Grandma pulled Grandpa, Grandpa pulled the turnip. They pulled and pulled but couldn't pull it up! Granddaughter came. Granddaughter pulled Grandma, Grandma pulled Grandpa, and Grandpa pulled the turnip. They pulled and pulled but couldn't pull it up!</p>
             <img class="content-img" src="http://www.fun4child.ru/uploads/posts/2010-01/1264763755_repka.jpg" width="60%">
        </div>
        <div class="clear"></div>
    </div>
    
    
    <div class="container" style="top:30px;left:320px;width:300px;height:inherit;"  id="second_window" onClick="activeWindow(this.id)">
    	<div id="window-panel-second" class="top-panel">
         	<span id="move-second" class="move-icon" onClick="moveWindow(this.id);"><img src="images/icons/move.png" width="24px" height="24px;"></span>
            <span class="window-name">The bun</span>
            <span id="close-second" class="panel-icon" onClick="closeWindow(this.id)" alt="Close"><img src="images/icons/close.png" width="24px" height="24px;"></span>
            <span id="maximize-second" class="panel-icon" onClick="maximizeWindow(this.id)" alt="Maximize"><img src="images/icons/maximize.png" width="24px" height="24px;"></span>
            <span id="minimize-second" class="panel-icon" onClick="minimizeContent(this.id)" alt="Minimize"><img src="images/icons/minimize.png" width="24px" height="24px;"></span>
        </div>
    	<div id="content-block-second" class="content">
        	<span class="n-resize" id="n-resize-second" onClick="Resize(this.id,'n')"></span>
        	<span class="w-resize" id="w-resize-second" onClick="Resize(this.id,'w')"></span>
    		<span class="nw-resize" id="d-resize-second"  onClick="Resize(this.id,'nw')"><img src="images/icons/resize.png" width="18px" height="18px"></span>
            <span class="interlayer"><br></span>
        	<h1>The bun</h1>
        	<p>Once there lived an old man and old woman. The old man said, "Old woman, bake me a bun." "What can I make it from? I have no flour." "Eh, eh, old woman! Scrape the cupboard, sweep the flour bin, and you will find enough flour. "The old woman picked up a duster, scraped the cupboard, swept the flour bin and gathered about two handfuls of flour. She mixed the dough with sour cream, fried it in butter, and put the bun on the window sill to cool. The bun lay and lay there. Suddenly it rolled off the window sill to the bench, from the bench to the floor, from the floor to the door. Then it rolled over the threshold to the entrance hall, from the entrance hall to the porch, from the porch to the courtyard, from the courtyard trough the gate and on and on.</p>
            <img class="content-img" src="http://www.fun4child.ru/uploads/posts/2010-01/1264764091_kolobok-angl.jpg" width="60%">
        </div>
        <div class="clear"></div>
    </div>
    
    <div class="container" style="top:30px;left:630px;width:300px;height:inherit;"  id="third_window" onClick="activeWindow(this.id)">
    	<div id="window-panel-third" class="top-panel">
         	<span id="move-third" class="move-icon" onClick="moveWindow(this.id);"><img src="images/icons/move.png" width="24px" height="24px;"></span>
            <span class="window-name">The wooden house</span>
            <span id="close-third" class="panel-icon" onClick="closeWindow(this.id)" alt="Close"><img src="images/icons/close.png" width="24px" height="24px;"></span>
            <span id="maximize-third" class="panel-icon maximize-icon" onClick="maximizeWindow(this.id)" alt="Maximize"><img src="images/icons/maximize.png" width="24px" height="24px;"></span>
            <span id="reestabi-third" class="panel-icon reestablish-icon" onClick="maximizeWindow(this.id)" alt="Reestablish"><img src="images/icons/reestablish.png" width="24px" height="24px;"></span>
            <span id="minimize-third" class="panel-icon" onClick="minimizeContent(this.id)" alt="Minimize"><img src="images/icons/minimize.png" width="24px" height="24px;"></span>
        </div>
    	<div id="content-block-third" class="content">
        	<span class="n-resize" id="n-resize-third" onClick="Resize(this.id,'n')"></span>
        	<span class="w-resize" id="w-resize-third" onClick="Resize(this.id,'w')"></span>
    		<span class="nw-resize" id="d-resize-third"  onClick="Resize(this.id,'nw')"><img src="images/icons/resize.png" width="18px" height="18px"></span>
            <span class="interlayer"><br></span>
        	<h1>The wooden house</h1>
        	<p>There stood a small wooden house (teremok) in the open field. A mouse ran by: - Little house, little house! Who lives in the little house? Nobody answered. The mouse went into the house and began to live there.</p>
            <p>A frog hopped by: - Little house, little house! Who lives in the little house? -I am a mouse. And who are you? - I am a frog. Let's live together. So the mouse and the frog began living together.</p>
            <img class="content-img" src="http://www.fun4child.ru/uploads/posts/2010-01/1264764507_teremok-angl.png" width="60%">
        </div>
        <div class="clear"></div>   
    </div>
    
    <div class="cursor-position">
    	<span id="xy"></span>
    </div>
</body>
</html>

<script type="text/javascript">
ns4 = (document.layers)? true:false
ie4 = (document.all)? true:false

var TopPanel_height = "30px";
var TopPanel_height_OLD = "";

var mouseDown_c = false;//	Флаг нажатия кнопки перемещения окна.
var tmpConteinerId = "";//	ID перемещаемого окна.

var depression_resize = false; //	Флаг нажатия кнопки ресайза.
var direction_resize = "";// Направление изменения размера окна.

var tmp_Zindex = 1;// Индекс для окон.
var oldParam = {};

function activeWindow(id){// Функция выводит блок на передний план.
	tmp_Zindex++;
	document.getElementById(id).style.zIndex = tmp_Zindex;
}

function Resize(id,direction){// Функция вызывается при изменении размера окна.
	direction_resize = direction;
	if(depression_resize){ 
		depression_resize = false;
	}else{
		depression_resize = true;
		tmpConteinerId = id;
	}
}
// Функция минимизации содержимого окна.
function minimizeContent(id){
	var block_number = id.substring(9);
	if(document.getElementById("content-block-" + block_number).style.display == "none"){
		$("#content-block-" + block_number).fadeIn('fast');
		document.getElementById(block_number + "_window").style.height = TopPanel_height_OLD;
	}else{
		 $("#content-block-" + block_number).fadeOut('fast');
		 TopPanel_height_OLD =  document.getElementById(block_number + "_window").style.height;
		 document.getElementById(block_number + "_window").style.height = TopPanel_height;
	}
}
//	Функция увеличивания окна на полный экран.
function maximizeWindow(id){
	var block_number = id.substring(9);
	if(document.getElementById(block_number + "_window").style.width == "100%"){//	Когда окно развернуто.
		document.getElementById(block_number + "_window").style.width = oldParam["width"];
		document.getElementById(block_number + "_window").style.height = oldParam["height"];
		document.getElementById(block_number + "_window").style.top = oldParam["top"];
		document.getElementById(block_number + "_window").style.left = oldParam["left"];
		//	Изменяем значок
		$("#maximize-" + block_number).css("display","block");
		$("#reestabi-" + block_number).css("display","none");
	}else{//	Когда окно свернуто.
		oldParam["width"] = document.getElementById(block_number + "_window").style.width;
		oldParam["height"] = document.getElementById(block_number + "_window").style.height;
		oldParam["top"] = document.getElementById(block_number + "_window").style.top;
		oldParam["left"] = document.getElementById(block_number + "_window").style.left;
		
		$("#content-block-" + block_number).fadeIn('fast');
		document.getElementById(block_number + "_window").style.width = "100%";
		document.getElementById(block_number + "_window").style.height = "97%";
		document.getElementById(block_number + "_window").style.top = "0px";
		document.getElementById(block_number + "_window").style.left = "0px";
		$("#maximize-" + block_number).css("display","none");
		$("#reestabi-" + block_number).css("display","block");
	}
}
// Функция закрытия окна.
function closeWindow(id){
	var block_number = id.substring(6);
	document.getElementById(block_number + "_window").style.display = "none";
}
// Функция сворачивания окна.
function curtailWindow(id){
	var block_number = id.substring(8);
	if(document.getElementById(block_number + "_window").style.display == "none"){
		$("#" + block_number + "_window").css("display","block");
	}else{
		
	}
	
}

function moveWindow(id){
	if(mouseDown_c){ 
		mouseDown_c = false;
	}else{
		mouseDown_c = true;
		tmpConteinerId = id;
	}
}

function init() {
    if(ns4){
		document.captureEvents(Event.MOUSEMOVE);
	}
    document.onmousemove = mousemove;
}

function mousemove(event) {
    var mouse_x = y = 0;
    if(document.attachEvent != null) {
        mouse_x = window.event.clientX;
        mouse_y = window.event.clientY;
    }else if (!document.attachEvent && document.addEventListener) {
        mouse_x = event.clientX;
        mouse_y = event.clientY;
    }
    status="x = " + mouse_x + ", y = " + mouse_y;
    document.getElementById('xy').innerHTML = "x = " + mouse_x + ", y = " + mouse_y;
	mouse_y_pos = mouse_y;
	mouse_x_pos = mouse_x;
	
	if(mouseDown_c){// Если нажата кнопка изменения позиции окна.
		tmpID = tmpConteinerId.substring(5) + "_window";//	ID окна, которое мы хотим переместить.
		document.getElementById(tmpID).style.top =  mouse_y - 14;//Новая позиция окна по Y.
		document.getElementById(tmpID).style.left =  mouse_x - 14;//Новая позиция окна по X.
	}
	if(depression_resize){// Если нажаты кнопки изменения размера окна.
		tmpID = tmpConteinerId.substring(9) + "_window";//	ID окна, размер которого меняем.
		var position_y_start = document.getElementById(tmpID).style.top;// Позиция начала окна по y.
		var position_x_start = document.getElementById(tmpID).style.left;// Позиция начала окна по x.
		position_y_start = position_y_start.split('p')[0];
		position_x_start = position_x_start.split('p')[0];
		var position_y_end = mouse_y;
		var position_x_end = mouse_x;
		switch(direction_resize){// Выбираем в каком направлении расширять окно.
			case "n":
				document.getElementById(tmpID).style.height =  position_y_end - position_y_start;
				break;	
			case "w":
				document.getElementById(tmpID).style.width =  position_x_end - position_x_start;
				break;
			case "nw":
				document.getElementById(tmpID).style.height =  position_y_end - position_y_start;
				document.getElementById(tmpID).style.width =  position_x_end - position_x_start;
				break;
		}
	}
}
init();
</script>